<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head next-head"/><title class="next-head">Props in Initial State is an Anti-Patterns | React patterns and techniques to use in development for React Developers</title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" class="next-head"/><meta name="description" content="`${props.title}`" class="next-head"/><meta name="author" content="Bunlong" class="next-head"/><meta property="og:type" content="website" class="next-head"/><meta property="og:url" content="https://reactpatterns.github.io" class="next-head"/><meta property="og:title" content="`${props.title}`" class="next-head"/><meta property="og:image" content="https://reactpatterns.github.io/static/reactjs.png" class="next-head"/><meta property="og:description" content="`${props.title}`" class="next-head"/><link href="../static/styles.css" rel="stylesheet" class="next-head"/><link rel="preload" href="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/page/post.js" as="script"/><link rel="preload" href="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/page/_error.js" as="script"/><link rel="preload" href="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/main.js" as="script"/></head><body><div id="__next"><div data-reactroot=""><div id="container"><div id="about">[ <a href="https://github.com/codefacebook/react-patterns" target="_blank">Github</a> | <a href="https://twitter.com/reactjspatterns" target="_blank">Twitter</a> ]</div><header><h1><a href="/">React Patterns &amp; Techniques</a></h1></header><div><h3>Props in Initial State is an Anti-Patterns</h3><p>Using props to generate state in constructor ( or getInitialState) often leads to duplication of &quot;source of truth&quot;, i.e. where the real data is. This is because constructor (or getInitialState) is only invoked when the component is first created.</p><p>The danger is that if the props on the component are changed without the component being &#x27;refreshed&#x27;, the new prop value will never be displayed because the constructor function (or getInitialState) will never update the current state of the component. The initialization of state from props only runs when the component is first created.</p><p>The bad one:</p><pre><code>class UserPassword extends Component {
  // constructor (or getInitialState)
  constructor(props) {
    super(props);
    this.state = {
      confirmed: false,
      inputVal: props.inputValue
    };
  }

  render() {
    return &lt;div&gt;{this.state.inputVal &amp;&amp; &lt;AnotherComponent/&gt;}&lt;/div&gt;
  }
}</code></pre><p>The good one:</p><pre><code>class UserPassword extends Component {
  // constructor function (or getInitialState)
  constructor(props) {
    super(props);
    this.state = {
      confirmed: false
    };
  }

  render() {
    return &lt;div&gt;{this.props.inputValue &amp;&amp; &lt;AnotherComponent/&gt;}&lt;/div&gt;
  }
}</code></pre></div><footer>Â© 2018 Maintain by <a href="https://github.com/Bunlong" target="_blank">Bunlong</a> | Website built with <a href="https://reactjs.org" target="_blank">React</a> &amp; <a href="https://github.com/zeit/next.js" target="_blank">Next.js</a> | ReactPatterns on [ <a href="https://github.com/codefacebook/react-patterns" target="_blank">Github</a> | <a href="https://twitter.com/reactjspatterns" target="_blank">Twitter</a> ]</footer></div></div></div><div id="__next-error"></div><script>
          __NEXT_DATA__ = {"props":{"content":"### Props in Initial State is an Anti-Patterns\n\nUsing props to generate state in constructor ( or getInitialState) often leads to duplication of \"source of truth\", i.e. where the real data is. This is because constructor (or getInitialState) is only invoked when the component is first created.\n\nThe danger is that if the props on the component are changed without the component being 'refreshed', the new prop value will never be displayed because the constructor function (or getInitialState) will never update the current state of the component. The initialization of state from props only runs when the component is first created.\n\nThe bad one:\n\n```\nclass UserPassword extends Component {\n  // constructor (or getInitialState)\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmed: false,\n      inputVal: props.inputValue\n    };\n  }\n\n  render() {\n    return \u003cdiv\u003e{this.state.inputVal \u0026\u0026 \u003cAnotherComponent/\u003e}\u003c/div\u003e\n  }\n}\n```\n\nThe good one:\n\n```\nclass UserPassword extends Component {\n  // constructor function (or getInitialState)\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmed: false\n    };\n  }\n\n  render() {\n    return \u003cdiv\u003e{this.props.inputValue \u0026\u0026 \u003cAnotherComponent/\u003e}\u003c/div\u003e\n  }\n}\n```","title":"Props in Initial State is an Anti-Patterns"},"page":"/post","pathname":"/post","query":{"id":"Props-in-initial-state-is-an-anti-patterns"},"buildId":"52cee6ea-5c0d-4315-b567-d38954a36415","assetPrefix":"/{reponame}","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }

          false
        </script><script async="" id="__NEXT_PAGE__/post" src="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/page/post.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/page/_error.js"></script><script src="/{reponame}/_next/52cee6ea-5c0d-4315-b567-d38954a36415/main.js" async=""></script></body></html>